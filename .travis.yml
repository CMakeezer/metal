# Copyright Bruno Dutra 2015
# Distributed under the Boost Software License, Version 1.0.
# (See accompanying file LICENSE.txt or copy at http://boost.org/LICENSE_1_0.txt)

language: cpp
os: linux
sudo: required

matrix:
    include:
        - env: COMPILER=g++-4.7
        - env: COMPILER=g++-4.8
        - env: COMPILER=g++-4.9
        - env: COMPILER=g++-5
        - env: COMPILER=clang-3.1
        - env: COMPILER=clang-3.2
        - env: COMPILER=clang-3.3
        - env: COMPILER=clang-3.4
        - env: COMPILER=clang-3.5
        - env: COMPILER=clang-3.6
        - env: COMPILER=clang-3.7
    
before_install:
    - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
    - sudo add-apt-repository --yes ppa:h-rayflood/llvm
    - sudo add-apt-repository --yes 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise-3.5 main'
    - sudo add-apt-repository --yes 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise-3.6 main'
    - sudo add-apt-repository --yes 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise main'
    - wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -
    - sudo apt-get -qq update
    
install:
    - sudo apt-get -qq install ${COMPILER}

before_script:
    - mkdir build
    - cd build
    - cmake .. -DCMAKE_CXX_COMPILER=/usr/bin/${COMPILER} -DBOOST_MPL2_ENABLE_EXTRA_WARNINGS=OFF -DBOOST_MPL2_ENABLE_STRICT_BEHAVIOR=OFF
    
script:
    - make mpl2.test
    - ctest --output-on-failure
